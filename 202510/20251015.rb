# ğŸ§© å•é¡Œ
# å•†å“ãƒ‡ãƒ¼ã‚¿ã®é…åˆ—ãŒã‚ã‚Šã¾ã™ã€‚
# åœ¨åº«(:stock)ãŒ1ä»¥ä¸Šã®å•†å“ã®ã€Œåˆè¨ˆä¾¡æ ¼(:price)ã€ã‚’æ±‚ã‚ã¦ãã ã•ã„ã€‚
#
# ğŸ’¡ æœŸå¾…ã™ã‚‹å‡ºåŠ›ï¼ˆä¾‹ï¼‰
# 4500  â† ï¼ˆ1000 + 1500 + 2000ï¼‰

items = [
  { name: "ã‚Šã‚“ã”", price: 1000, stock: 3 },
  { name: "ã¿ã‹ã‚“", price: 1500, stock: 1 },
  { name: "ã¶ã©ã†", price: 2000, stock: 0 }
]

# ã“ã“ã«å‡¦ç†ã‚’æ›¸ã
p items.select{|item| item[:stock] >= 1}.sum{|item| item[:price] * item[:stock]}

####################################################################################

# ğŸ§© å•é¡Œ
# å•†å“ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã™ã€‚
# å„ã‚«ãƒ†ã‚´ãƒªã”ã¨ã«åœ¨åº«(:stock)Ã—ä¾¡æ ¼(:price)ã®åˆè¨ˆã‚’æ±‚ã‚ã¦ã€
# ãƒãƒƒã‚·ãƒ¥ã§è¿”ã—ã¦ãã ã•ã„ã€‚
#
# ğŸ’¡ æœŸå¾…ã™ã‚‹å‡ºåŠ›ï¼ˆä¾‹ï¼‰
# {"é£Ÿå“"=>4000, "é£²æ–™"=>3500, "é›‘è²¨"=>2000}

items = [
  { name: "ã‚Šã‚“ã”", category: "é£Ÿå“", price: 1000, stock: 2 },
  { name: "ã¿ã‹ã‚“", category: "é£Ÿå“", price: 500, stock: 4 },
  { name: "ã‚³ãƒ¼ãƒ’ãƒ¼", category: "é£²æ–™", price: 1000, stock: 3 },
  { name: "ãŠèŒ¶", category: "é£²æ–™", price: 500, stock: 1 },
  { name: "ãƒãƒ¼ãƒˆ", category: "é›‘è²¨", price: 1000, stock: 2 }
]

# ã“ã“ã«å‡¦ç†ã‚’æ›¸ã
p items.group_by{|item|item[:category]}.transform_values{|item| item.sum{|i| i[:price] * i[:stock]}}